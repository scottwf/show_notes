services:
  shownotes:
    build: .
    container_name: shownotes
    restart: unless-stopped
    ports:
      - "5003:5003"
    env_file:
      - .env
    environment:
      - FLASK_APP=run.py
    volumes:
      # Database and app data
      - /home/docker/appdata/shownotes:/app/instance
      # Logs
      - /home/docker/appdata/shownotes/logs:/app/logs
      # Persistent image caches only (do NOT mount entire static dir)
      - /home/docker/appdata/shownotes/static/poster:/app/app/static/poster
      - /home/docker/appdata/shownotes/static/background:/app/app/static/background
      - /home/docker/appdata/shownotes/static/cast:/app/app/static/cast
      - /home/docker/appdata/shownotes/static/uploads:/app/app/static/uploads
    networks:
      - shownotes-network

networks:
  shownotes-network:
    driver: bridge
