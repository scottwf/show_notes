<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plex Webhook Payloads</title>
    <style>
        body { font-family: monospace; background: #f8f8f8; color: #222; }
        .payload-block { background: #fff; border: 1px solid #ccc; margin: 1em 0; padding: 1em; border-radius: 6px; }
        pre { background: #f0f0f0; padding: 1em; border-radius: 4px; overflow-x: auto; }
        h2 { margin-top: 2em; }
    </style>
</head>
<body>
    <h1>Plex Webhook Payloads (Latest 20)</h1>
    {% for entry in payloads %}
        <div class="payload-block">
            <strong>ID:</strong> {{ entry.id }}<br>
            <strong>Event Type:</strong> {{ entry.event_type }}<br>
            <strong>Event Timestamp:</strong> {{ entry.event_timestamp }}<br>
            <strong>Payload:</strong>
            <pre>{{ entry.payload | tojson(indent=2) if entry.payload is mapping or entry.payload is sequence else entry.payload }}</pre>
        </div>
    {% else %}
        <p>No payloads found.</p>
    {% endfor %}
</body>
</html> 